{"ast":null,"code":"import { __assign } from \"tslib\";\nfunction ItoI(a) {\n  return a;\n}\nfunction innerCreateMedium(defaults, middleware) {\n  if (middleware === void 0) {\n    middleware = ItoI;\n  }\n  var buffer = [];\n  var assigned = false;\n  var medium = {\n    read: function () {\n      if (assigned) {\n        throw new Error('Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.');\n      }\n      if (buffer.length) {\n        return buffer[buffer.length - 1];\n      }\n      return defaults;\n    },\n    useMedium: function (data) {\n      var item = middleware(data, assigned);\n      buffer.push(item);\n      return function () {\n        buffer = buffer.filter(function (x) {\n          return x !== item;\n        });\n      };\n    },\n    assignSyncMedium: function (cb) {\n      assigned = true;\n      while (buffer.length) {\n        var cbs = buffer;\n        buffer = [];\n        cbs.forEach(cb);\n      }\n      buffer = {\n        push: function (x) {\n          return cb(x);\n        },\n        filter: function () {\n          return buffer;\n        }\n      };\n    },\n    assignMedium: function (cb) {\n      assigned = true;\n      var pendingQueue = [];\n      if (buffer.length) {\n        var cbs = buffer;\n        buffer = [];\n        cbs.forEach(cb);\n        pendingQueue = buffer;\n      }\n      var executeQueue = function () {\n        var cbs = pendingQueue;\n        pendingQueue = [];\n        cbs.forEach(cb);\n      };\n      var cycle = function () {\n        return Promise.resolve().then(executeQueue);\n      };\n      cycle();\n      buffer = {\n        push: function (x) {\n          pendingQueue.push(x);\n          cycle();\n        },\n        filter: function (filter) {\n          pendingQueue = pendingQueue.filter(filter);\n          return buffer;\n        }\n      };\n    }\n  };\n  return medium;\n}\nexport function createMedium(defaults, middleware) {\n  if (middleware === void 0) {\n    middleware = ItoI;\n  }\n  return innerCreateMedium(defaults, middleware);\n}\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function createSidecarMedium(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var medium = innerCreateMedium(null);\n  medium.options = __assign({\n    async: true,\n    ssr: false\n  }, options);\n  return medium;\n}","map":{"version":3,"names":["__assign","ItoI","a","innerCreateMedium","defaults","middleware","buffer","assigned","medium","read","Error","length","useMedium","data","item","push","filter","x","assignSyncMedium","cb","cbs","forEach","assignMedium","pendingQueue","executeQueue","cycle","Promise","resolve","then","createMedium","createSidecarMedium","options","async","ssr"],"sources":["C:/Users/benja/Documents/GitHub/Reserv/frontend/node_modules/use-sidecar/dist/es2015/medium.js"],"sourcesContent":["import { __assign } from \"tslib\";\r\nfunction ItoI(a) {\r\n    return a;\r\n}\r\nfunction innerCreateMedium(defaults, middleware) {\r\n    if (middleware === void 0) { middleware = ItoI; }\r\n    var buffer = [];\r\n    var assigned = false;\r\n    var medium = {\r\n        read: function () {\r\n            if (assigned) {\r\n                throw new Error('Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.');\r\n            }\r\n            if (buffer.length) {\r\n                return buffer[buffer.length - 1];\r\n            }\r\n            return defaults;\r\n        },\r\n        useMedium: function (data) {\r\n            var item = middleware(data, assigned);\r\n            buffer.push(item);\r\n            return function () {\r\n                buffer = buffer.filter(function (x) { return x !== item; });\r\n            };\r\n        },\r\n        assignSyncMedium: function (cb) {\r\n            assigned = true;\r\n            while (buffer.length) {\r\n                var cbs = buffer;\r\n                buffer = [];\r\n                cbs.forEach(cb);\r\n            }\r\n            buffer = {\r\n                push: function (x) { return cb(x); },\r\n                filter: function () { return buffer; },\r\n            };\r\n        },\r\n        assignMedium: function (cb) {\r\n            assigned = true;\r\n            var pendingQueue = [];\r\n            if (buffer.length) {\r\n                var cbs = buffer;\r\n                buffer = [];\r\n                cbs.forEach(cb);\r\n                pendingQueue = buffer;\r\n            }\r\n            var executeQueue = function () {\r\n                var cbs = pendingQueue;\r\n                pendingQueue = [];\r\n                cbs.forEach(cb);\r\n            };\r\n            var cycle = function () { return Promise.resolve().then(executeQueue); };\r\n            cycle();\r\n            buffer = {\r\n                push: function (x) {\r\n                    pendingQueue.push(x);\r\n                    cycle();\r\n                },\r\n                filter: function (filter) {\r\n                    pendingQueue = pendingQueue.filter(filter);\r\n                    return buffer;\r\n                },\r\n            };\r\n        },\r\n    };\r\n    return medium;\r\n}\r\nexport function createMedium(defaults, middleware) {\r\n    if (middleware === void 0) { middleware = ItoI; }\r\n    return innerCreateMedium(defaults, middleware);\r\n}\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nexport function createSidecarMedium(options) {\r\n    if (options === void 0) { options = {}; }\r\n    var medium = innerCreateMedium(null);\r\n    medium.options = __assign({ async: true, ssr: false }, options);\r\n    return medium;\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}